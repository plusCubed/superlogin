<!DOCTYPE html>
<html lang="en">
<head>
    <title>Authentication <%= error ? 'Failed' : 'Success' %></title>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
</head>
<body>
<script type="text/javascript">
    if (window.opener) {
        window.opener.focus();
        var session = <%- JSON.stringify(session) %>;
        var error = <%- JSON.stringify(error) %>;
        var link = <%- JSON.stringify(link) %>;

        var originURL = '<%= process.env.NODE_ENV === 'production' ? prodTargetOrigin : devTargetOrigin %>';

        try {
            window.opener.postMessage(
                {
                    session: session,
                    error: error,
                    link: link
                },
                originURL
            );
        } catch (err) {
            console.log(err);
        }
    }
    window.close();
</script>
</body>
</html>